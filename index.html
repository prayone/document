<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="zh-CN">
<head>
    <title>metro-zTree</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/zTreeStyle/metro.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script src="js/jquery.ztree.all-3.5.min.js"></script>
</head>
<style>
    .row{
        margin: 0;
    }
    .ztree{
    }
    .box{
        border:1px solid #ccc;
        height: 1000px;
    }
</style>
<body>
<script>
    var zTree;
    var demoIframe;

    function zTreeOnClick(event, treeId, treeNode) {
    alert(treeNode.tId + ", " + treeNode.name);
};

    var setting = {
        check: {
            enable: true
        },
        view: {
            dblClickExpand: false,
            showLine: true,
            selectedMulti: false
        },
        data: {
            simpleData: {
                enable:true,
                idKey: "id",
                pIdKey: "pId",
                rootPId: ""
            }
        },
        callback: {
            beforeClick: function(treeId, treeNode) {
                var zTree = $.fn.zTree.getZTreeObj("tree");
                if (treeNode.isParent) {
                    zTree.expandNode(treeNode);
                    return false;
                } else {
                    demoIframe.attr("src",treeNode.file + ".html");
                    return true;
                }
            },
            onClick:zTreeOnClick
        }
    };

    var zNodes =[
        {id:1, pId:0, name:"1 项目录入", open:true},
        {id:101, pId:1, name:"1.1 项目录入", file:"core/standardData"},
        {id:102, pId:1, name:"1.2 批量导入", file:"core/simpleData"},
        {id:1021, pId:102, name:"1.2.1 下载模板", file:"core/standardData"},
        {id:1022, pId:102, name:"1.2.2 导入Excel", file:"core/standardData"},
        {id:1023, pId:102, name:"1.2.3 错误信息提示", file:"core/standardData"},

       

        {id:2, pId:0, name:"2 申报库", open:false},
        {id:201, pId:2, name:"2.1 项目修改/删除", file:"excheck/checkbox"},
        {id:202, pId:2, name:"2.2 入重点项目库", file:"excheck/checkbox_count"},
        {id:203, pId:2, name:"2.3 入省考项目库", file:"excheck/checkbox_fun"},
        {id:204, pId:2, name:"2.4 入领导联系项目库", file:"excheck/radio"},
        {id:205, pId:2, name:"2.5 项目驳回", file:"excheck/radio_fun"},

        {id:3, pId:0, name:"3 项目库", open:false},
        {id:301, pId:3, name:"3.1 重点项目库", file:"exedit/drag"},
        {id:3011, pId:301, name:"3.1.1 分配单位", file:"exedit/drag"},
        {id:3012, pId:301, name:"3.1.2 退回申报库", file:"exedit/drag"},
        {id:302, pId:3, name:"3.2 省考项目库", file:"exedit/drag_super"},
        {id:3021, pId:302, name:"3.2.1 移除项目", file:"exedit/drag_super"},
        {id:303, pId:3, name:"3.3 领导联系项目库", file:"exedit/drag_fun"},
        {id:3031, pId:303, name:"3.3.1 分配包联领导", file:"exedit/drag_fun"},
        {id:3032, pId:303, name:"3.3.2 移除项目", file:"exedit/drag_fun"},

        {id:4, pId:0, name:"4 月度进展", open:false},
        {id:401, pId:4, name:"4.1 月度填报/修改", file:"bigdata/common"},
        {id:402, pId:4, name:"4.2 删除月度", file:"bigdata/diy_async"},

        {id:5, pId:0, name:"5 消息管理", open:false},
        {id:501, pId:5, name:"5.1 自定义短信", file:"super/oneroot"},
        {id:5011, pId:501, name:"5.1.1 选择用户/群组", file:"super/oneroot"},
        {id:5012, pId:501, name:"5.1.2 编辑短信/使用模板", file:"super/oneroot"},
        {id:5013, pId:501, name:"5.1.3 通知范围", file:"super/oneroot"},
        {id:5014, pId:501, name:"5.1.4 定时发送", file:"super/oneroot"},
        {id:502, pId:5, name:"5.2 短信规则设置", file:"super/oneclick"},
        {id:5021, pId:502, name:"5.2.1 修改/删除", file:"super/oneclick"},
        {id:503, pId:5, name:"5.3 短信模板设置", file:"super/singlepath"},
        {id:5031, pId:503, name:"5.3.1 新增短信模板", file:"super/singlepath"},
        {id:5032, pId:503, name:"5.3.2 修改/删除短信模板", file:"super/singlepath"},
        {id:504, pId:5, name:"5.4 短信群组设置", file:"super/diydom"},
        {id:5041, pId:504, name:"5.4.1 添加短信群组", file:"super/diydom"},
        {id:5042, pId:504, name:"5.4.2 修改/删除短信群组", file:"super/diydom"},
        {id:505, pId:5, name:"5.5 短信发送统计", file:"super/checkbox_radio"},

        {id:6, pId:0, name:"6 组织人员", open:false},
        {id:601, pId:6, name:"6.1 用户管理", file:"exhide/common"},
        {id:6011, pId:601, name:"6.1.1 新增用户", file:"exhide/common"},
        {id:6012, pId:601, name:"6.1.2 修改/删除用户", file:"exhide/common"},
        {id:6013, pId:601, name:"6.1.3 禁用用户", file:"exhide/common"},
        {id:602, pId:6, name:"6.2 高级用户管理", file:"exhide/checkbox"},
        {id:603, pId:6, name:"6.3 角色权限管理", file:"exhide/radio"},

        {id:7, pId:0, name:"7 系统设置", open:false},
        {id:701, pId:7, name:"7.1 参数设置", file:"exhide/common"},
        {id:702, pId:7, name:"7.2 表单验证设置", file:"exhide/checkbox"},
        {id:703, pId:7, name:"7.3 月度填报设置", file:"exhide/radio"}
    ];

    $(document).ready(function(){
        var t = $("#tree");
        t = $.fn.zTree.init(t, setting, zNodes);
        demoIframe = $("#testIframe");
        demoIframe.bind("load", loadReady);
        var zTree = $.fn.zTree.getZTreeObj("tree");
        zTree.selectNode(zTree.getNodeByParam("id", 101));

    });

    function loadReady() {
        var bodyH = demoIframe.contents().find("body").get(0).scrollHeight,
                htmlH = demoIframe.contents().find("html").get(0).scrollHeight,
                maxH = Math.max(bodyH, htmlH), minH = Math.min(bodyH, htmlH),
                h = demoIframe.height() >= maxH ? minH:maxH ;
        if (h < 530) h = 530;
        demoIframe.height(h);
    }
</script>
    <div class="row">
        <div class="col-lg-2 col-md-3 col-sm-4 box1 text-center">
            <ul id="tree" class="ztree " style="width:350px; overflow:auto;"></ul>
        </div>
        <div class="col-lg-9 col-md-8 col-sm-7 box">
            内容
        </div>
    </div>
</body>
</html>